<div class="container-fluid px-4 py-4">
  <!-- Header Section -->
  <div class="d-flex justify-content-between align-items-center mb-4">
    <div>
      <h2 class="mb-0 text-primary">
        <i class="fas fa-users me-2"></i>Users Management
      </h2>
      <p class="text-muted mb-0">Manage all system users and their permissions</p>
    </div>
    <button class="btn btn-primary rounded-pill px-4" (click)="navigateToAddUser()">
      <i class="fas fa-plus-circle me-2"></i>Add New User
    </button>
  </div>
  <!-- Loading State -->
  <div *ngIf="loading" class="text-center my-5">
    <div class="spinner-border text-primary" role="status"></div>
    <p class="mt-2">Loading users...</p>
  </div>

  <!-- Error State -->
  <div *ngIf="error" class="alert alert-danger">
    {{ error }}
  </div>

  <!-- Table -->
  <div *ngIf="!loading && !error" class="table-responsive">
    <table class="table table-striped table-hover align-middle shadow-sm">
      <thead class="table-dark">
        <tr>
          <th>#</th>
          <th>Username</th>
          <th>Email</th>
          <th>Role ID</th>
          <th>Shop ID</th>
          <th>Created At</th>
          <th class="text-center">Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let user of paginatedUsers; let i = index">
          <td>{{ (currentPage - 1) * pageSize + i + 1 }}</td>
          <td>{{ user.username }}</td>
          <td>{{ user.email }}</td>
          <td>{{ user.roleId }}</td>
          <td>{{ user.shopId }}</td>
          <td>{{ user.createdAt | date: 'short' }}</td>
          <td class="text-center">
            <button class="btn btn-sm btn-outline-primary me-2" (click)="editUser(user)">
              <i class="bi bi-pencil"></i> Edit
            </button>
            <button class="btn btn-sm btn-outline-danger" (click)="deleteUser(user.userId)">
              <i class="bi bi-trash"></i> Delete
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Pagination -->
  <nav *ngIf="totalPages > 1" class="mt-3">
    <ul class="pagination justify-content-center">
      <li class="page-item" [class.disabled]="currentPage === 1">
        <a class="page-link" (click)="changePage(currentPage - 1)">Previous</a>
      </li>

      <li *ngFor="let page of [].constructor(totalPages); let idx = index" 
          class="page-item" [class.active]="currentPage === idx + 1">
        <a class="page-link" (click)="changePage(idx + 1)">{{ idx + 1 }}</a>
      </li>

      <li class="page-item" [class.disabled]="currentPage === totalPages">
        <a class="page-link" (click)="changePage(currentPage + 1)">Next</a>
      </li>
    </ul>
  </nav>
</div>
