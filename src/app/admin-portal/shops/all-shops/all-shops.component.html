<div class="container-fluid px-4 py-4">
  <!-- Header Section -->
  <div class="d-flex justify-content-between align-items-center mb-4">
    <div>
      <h2 class="mb-0 text-primary">
        <i class="fas fa-store me-2"></i>Shop Management
      </h2>
      <p class="text-muted mb-0">Manage all system shops and their details</p>
    </div>
    <button class="btn btn-primary rounded-pill px-4" (click)="navigateToAddShop()">
      <i class="fas fa-plus-circle me-2"></i>Add New Shop
    </button>
  </div>

  <!-- Loading State -->
  <div *ngIf="loading" class="text-center my-5">
    <div class="spinner-border text-primary" role="status"></div>
    <p class="mt-2">Loading shops...</p>
  </div>

  <!-- Error State -->
  <div *ngIf="error" class="alert alert-danger">
    {{ error }}
  </div>

  <!-- Table -->
  <div *ngIf="!loading && !error" class="table-responsive">
    <table class="table table-striped table-hover align-middle shadow-sm">
      <thead class="table-dark">
        <tr>
          <th>#</th>
          <th>Logo</th>
          <th>Shop Name</th>
          <!-- <th>Description</th>
          <th>Contact Info</th> -->
          <th>Created By</th>
          <th>Created At</th>
          <th class="text-center">Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let shop of paginatedShops; let i = index">
          <td>{{ (currentPage - 1) * pageSize + i + 1 }}</td>
          <td>
            <img [src]="shop.fullLogoUrl || 'assets/default-shop.png'" 
                 class="img-thumbnail rounded-circle" 
                 style="width: 50px; height: 50px; object-fit: cover;" 
                 alt="Shop Logo">
          </td>
          <td class="fw-semibold">{{ shop.shopName }}</td>
          <!-- <td class="text-truncate" style="max-width: 200px;">{{ shop.description || 'N/A' }}</td>
          <td>{{ shop.contactInfo }}</td> -->
          <td>{{ shop.creatorName || 'Unknown' }}</td>
          <td>{{ shop.createdAt | date: 'short' }}</td>
          <td class="text-center">
            <button class="btn btn-sm btn-outline-warning me-2" (click)="editShop(shop)">
              <i class="fas fa-edit"></i> Edit
            </button>
            <button class="btn btn-sm btn-outline-danger" (click)="deleteShop(shop.shopId)">
              <i class="fas fa-trash"></i> Delete
            </button>
          </td>
        </tr>
        <tr *ngIf="paginatedShops.length === 0">
          <td colspan="8" class="text-center text-muted py-4">
            No shops found. <a href="javascript:void(0)" (click)="navigateToAddShop()" class="text-primary">Add your first shop</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Pagination -->
  <nav *ngIf="totalPages > 1" class="mt-3">
    <ul class="pagination justify-content-center">
      <li class="page-item" [class.disabled]="currentPage === 1">
        <a class="page-link" (click)="changePage(currentPage - 1)">Previous</a>
      </li>

      <li *ngFor="let page of [].constructor(totalPages); let idx = index" 
          class="page-item" [class.active]="currentPage === idx + 1">
        <a class="page-link" (click)="changePage(idx + 1)">{{ idx + 1 }}</a>
      </li>

      <li class="page-item" [class.disabled]="currentPage === totalPages">
        <a class="page-link" (click)="changePage(currentPage + 1)">Next</a>
      </li>
    </ul>
  </nav>
</div>